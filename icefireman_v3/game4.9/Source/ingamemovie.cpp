#include "stdafx.h"
#include "Resource.h"
#include <mmsystem.h>
#include <ddraw.h>
#include "audio.h"
#include "gamelib.h"
#include "ingamemovie.h"
namespace game_framework {
	ingamemovie::ingamemovie()
	{
		x = 145;
		y = 460;

	}
	void ingamemovie::Init()
	{
		up = false;
		down = false;
	}
	/////////////////////////////////////////重置圖片///////////////////////////////////////////
	void ingamemovie::ResetPos()
	{
		x = 145;
		y = 460;
	}
	////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////讀取圖片///////////////////////////////////////////
	void ingamemovie::LoadBitmap()
	{
		image.AddBitmap(ingame,RGB(0, 0, 0));
		image.AddBitmap(ingame_menu,RGB(0,0,0));
		image.AddBitmap(ingame_retry,RGB(0, 0, 0));
		image.SetDelayCount(1);
		image.Reset();
	}
	////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////顯示圖片///////////////////////////////////////////
	void ingamemovie::OnShow()
	{
		image.SetTopLeft(x, y);
		image.OnShow();
	}
	////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////執行圖片上下滑動///////////////////////////////////////
	void ingamemovie::OnMove()
	{
		if (y > 80 && up) {
			 y -= 40;
		}
		else if (y < 460 && down) {
			 y += 20;
		}
		else if( x== 145 && y == 460 || x == 145 && y == 80)
		{
			Init();
		}
	}
	////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////圖片上下滑動切換///////////////////////////////////////
	void ingamemovie::SetUp()
	{
		up = true;
		down = false;
	}

	void ingamemovie::SetDown()
	{
		up = false;
		down = true;
	}
	////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////判斷圖片是否滑動到定位/////////////////////////////////
	bool ingamemovie::isOK()
	{
		if(x== 145 && y == 460) return true;
		else return false;
		
	}
	////////////////////////////////////////////////////////////////////////////////////////////
	void ingamemovie::GoMenu() {
		image.Movetonum(1);
	}
	void ingamemovie::GoRetry() {
		image.Movetonum(2);
	}
	void ingamemovie::GoInit() {
		image.Movetonum(0);
	}
}